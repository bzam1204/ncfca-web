status: pending

# 06 — Documentar Padrão e Guardas (lint/review)

## Objetivo
Documentar o padrão Hook → Action → Gateway e criar guardas (lint/checklist) para impedir regressões (fetch/token no cliente; queries legacy).

## Arquivos e caminhos (criar/editar)
- Criar: `docs/api-layer-standardization.md`
- Editar (ou criar regra): `.eslintrc.*` — adicionar restrições para `src/hooks/*`.
- Opcional: `/.github/PULL_REQUEST_TEMPLATE.md` — checklist de revisão.

## Contratos e estruturas
- ESLint (exemplo):
  - `no-restricted-imports`/`no-restricted-syntax` proibindo `useSession` e `fetch` em `src/hooks/**`.
  - Mensagem orientando uso de Actions.
- PR Template: itens obrigatórios
  - Mapeamento de contrato do `openapi.json`.
  - Confirmar ausência de `fetch`/`useSession` em hooks.
  - Confirmar invalidações `QueryKeys`/`NextKeys` para mutações.

## Regras de negócio e validações
- Segurança: token só em Actions/Server Components.
- Observabilidade: gateways logam erros 4xx/5xx (já existente/ajustar quando necessário).

## Passo a passo
1) Escrever `docs/api-layer-standardization.md` com exemplos curtos e links para Actions/Gateways.
2) Configurar regra ESLint escopada para `src/hooks/**`.
3) Adicionar checklist no template de PR.

## Critérios de aceite
- Lint falha ao introduzir `fetch`/`useSession` em `src/hooks/**`.
- PRs contam com checklist de conformidade ao padrão.

## Testes mínimos (âncoras)
- Rodar ESLint em um hook com `fetch` e ver erro.

## Notas de versão/refs (Context7)
- Next.js 15, TanStack v5

