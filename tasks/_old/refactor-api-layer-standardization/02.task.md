status: pending

# 02 — Refatorar `use-checkout.use-case.ts` para Hooks e Gateway

## Objetivo

Substituir o `use-checkout.use-case.ts` pela criação de um novo `CheckoutGateway` e um hook `useCreateCheckout` para encapsular a lógica de finalização de compra.

## Arquivos e Caminhos

- **Criar (Interface):** `/src/application/gateways/checkout.gateway.ts`
- **Criar (Implementação):** `/src/infrastructure/gateways/checkout.gateway.http.ts`
- **Criar (Hook):** `/src/hooks/use-create-checkout.ts`
- **Editar (Container):** `/src/infrastructure/containers/index.ts` para registrar o novo gateway.
- **Refatorar (Componentes):** Substituir o uso de `use-checkout.use-case.ts` na página de checkout pelo novo hook.
- **Deletar (Use-Case):** `/src/application/use-cases/use-checkout.use-case.ts`

## Contratos e Estruturas

**1. `CheckoutGateway` (Interface)**

```typescript
export interface CreateCheckoutParams {
  // Defina os parâmetros com base no que o use-case atual envia para a API
  // Exemplo:
  items: { productId: string; quantity: number }[];
  userId: string;
}

export interface CreateCheckoutResponse {
  // Defina a resposta com base no que a API retorna
  // Exemplo:
  transactionId: string;
  status: string;
}

export abstract class CheckoutGateway {
  abstract createCheckout(params: CreateCheckoutParams): Promise<CreateCheckoutResponse>;
}
```

**2. `CheckoutGatewayHttp` (Implementação)**
Implementar o método `createCheckout`, fazendo a chamada `fetch` para o endpoint `/checkout` da API.

## Passo a Passo

1.  **Gateway:** Crie a interface `CheckoutGateway` e sua implementação `CheckoutGatewayHttp`.
2.  **Injeção de Dependência:** Registre o `CheckoutGateway` no container de DI, mapeando a interface para a implementação HTTP.
3.  **Hook:** Crie o hook `useCreateCheckout` utilizando `useMutation` do TanStack Query. Ele deve invocar o método `createCheckout` do gateway.
4.  **Refatoração:** Na página ou componente de checkout, substitua a chamada ao `useCheckoutUseCase` pelo novo hook `useCreateCheckout`.
5.  **Limpeza:** Após a verificação, delete o arquivo `/src/application/use-cases/use-checkout.use-case.ts`.

## Critérios de Aceite

- O processo de checkout pode ser iniciado e finalizado com sucesso.
- A chamada para a API de checkout é realizada através do `CheckoutGatewayHttp`.
- O arquivo `use-checkout.use-case.ts` foi removido.

## Testes Mínimos

- Realizar um fluxo de checkout completo na aplicação para garantir que a integração com a API está funcionando corretamente através do novo hook.
