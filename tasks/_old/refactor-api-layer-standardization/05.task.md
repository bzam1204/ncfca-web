status: pending

# 05 — Refatorar `use-register-user.use-case.ts` para Hooks e Gateway

## Objetivo

Substituir o `use-register-user.use-case.ts` pela criação de um novo `AccountGateway` e um hook `useRegisterUser` para o registro de novos usuários.

## Arquivos e Caminhos

- **Criar (Interface):** `/src/application/gateways/account.gateway.ts`
- **Criar (Implementação):** `/src/infrastructure/gateways/account.gateway.http.ts`
- **Criar (Hook):** `/src/hooks/use-register-user.ts`
- **Editar (Container):** `/src/infrastructure/containers/index.ts` para registrar o novo gateway.
- **Refatorar (Componentes):** Atualizar a página de registro para utilizar o novo hook `useRegisterUser`.
- **Deletar (Use-Case):** `/src/application/use-cases/use-register-user.use-case.ts`

## Contratos e Estruturas

**1. `AccountGateway` (Interface)**

```typescript
import { User } from '@/domain/entities/user';

export type RegisterUserParams = Omit<User, 'id' | 'roles'>; // Ou DTO específico

export abstract class AccountGateway {
  abstract registerUser(params: RegisterUserParams): Promise<User>;
}
```

**2. `AccountGatewayHttp` (Implementação)**
Implementar o método `registerUser`, que fará a chamada `fetch` para o endpoint de registro de usuário da API.

## Passo a Passo

1.  **Gateway:** Crie a interface `AccountGateway` e sua implementação `AccountGatewayHttp`.
2.  **Injeção de Dependência:** Registre o `AccountGateway` no container de DI.
3.  **Hook:** Crie o hook `useRegisterUser` utilizando `useMutation` do TanStack Query. Ele deve invocar o método `registerUser` do gateway.
4.  **Refatoração:** Na página de registro (`/src/app/register/page.tsx`), substitua a lógica que usa `useRegisterUserUseCase` pelo novo hook `useRegisterUser`.
5.  **Limpeza:** Após confirmar que o fluxo de registro está funcionando, delete o arquivo `/src/application/use-cases/use-register-user.use-case.ts`.

## Critérios de Aceite

- O formulário de registro de novos usuários funciona corretamente.
- A submissão do formulário invoca o `useRegisterUser` hook e, consequentemente, o `AccountGateway`.
- Um novo usuário é criado com sucesso após o registro.
- O arquivo `use-register-user.use-case.ts` foi removido.

## Testes Mínimos

- Preencher e submeter o formulário de registro na aplicação.
- Verificar se o usuário é criado e se o login pode ser efetuado com as novas credenciais.
